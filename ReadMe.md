# What does this do?

This is a CQ(R)S framework which uses Source Generators for creating API infrastructure using a Mediator pattern.

## How does it work?

Add this to your consuming project .csproj file
```bash
    <ItemGroup>
        <ProjectReference Include="..\Framework.Contract\Framework.Contract.csproj" />

        <ProjectReference Include="..\Framework.Generators\Framework.Generators.csproj" OutputItemType="Analyzer" ReferenceOutputAssembly="false" />
    </ItemGroup>
```

Add the following attribute to your commands or query classes or records.
```bash
[ApiDefinition("/do-an-async-thing", false)]
```

Add A handler for the command or query class with the following (example) signature.

```bash
public class DoAnAsyncThingCommandHandler : IRequestHandler<DoAnAsyncThingCommand, CommandResponse>
```

Register the autogenerated extension methods in your DI container.

```bash
builder.Services.AddSingletonMediatorServices();
app.AddApiEndpoints();
```
## Done âœ…
When the application starts the server will host the minimal API and automatically forwards the types to the Mediator.
This is AOT friendly. For example usage see Framework.Example project.